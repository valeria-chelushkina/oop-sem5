# Lab 3 - Maze Game (Android)

## Опис проекту

**Maze Game** - це Android додаток-гра, де гравець має знайти вихід з випадково згенерованого лабіринту. Проект демонструє використання алгоритмів генерації лабіринтів та пошуку шляхів, реалізованих в Android Studio.

## Основні можливості

### Ігрові функції
- **Генерація випадкових лабіринтів** - кожен лабіринт унікальний
- **Інтерактивне керування** - рух гравця за допомогою стрілок або свайпів
- **Показ оптимального шляху** - можливість побачити найкоротший шлях до виходу
- **Налаштування розміру** - зміна складності лабіринту (від 15x15 до 51x51)
- **Анімація руху** - анімація переміщення гравця
- **Автоматичний перезапуск** - новий лабіринт генерується автоматично через 3 секунди після перемоги
- **Правильність рухів** - неможливість пройти крізь стіни

### Візуальні особливості
- **Кольорова схема**:
  - Чорні стіни
  - Білі проходи
  - Фіолетовий гравець
  - Червоний вихід
  - Напівпрозорий червоний шлях (при показі рішення)
- **Адаптивний розмір** - лабіринт автоматично підлаштовується під розмір екрану
- **Плавна анімація** - рух гравця з використанням `ValueAnimator` та `DecelerateInterpolator`

## Алгоритми

### 1. Recursive Backtracking (Рекурсивний повернення назад)

**Призначення**: Генерація випадкового лабіринту з гарантованим шляхом від початку до кінця.

**Реалізація**: Клас `Maze.java`, метод `carvePassage()`

**Принцип роботи**:
1. Всі клітинки ініціалізуються як стіни
2. Алгоритм починає з випадкової клітинки (зазвичай 1,1)
3. Для кожної клітинки:
   - Позначає її як прохід
   - Випадковим чином обирає напрямок (вгору, вправо, вниз, вліво)
   - Перевіряє, чи можна пройти на 2 клітинки вперед (перестрибнути через стіну)
   - Якщо можна - видаляє стіну між поточною та новою клітинкою
   - Рекурсивно викликає себе для нової клітинки
4. Процес продовжується до тих пір, поки всі доступні клітинки не будуть оброблені


### 2. BFS (Breadth-First Search) - Пошук в ширину

**Призначення**: Знаходження найкоротшого шляху від поточної позиції гравця до виходу.

**Реалізація**: Клас `PathFinder.java`, метод `findPath()`

**Принцип роботи**:
1. Використовує чергу (Queue) для зберігання клітинок для обробки
2. Масив `visited` відстежує відвідані клітинки
3. Масив `parent` зберігає батьківську клітинку для відновлення шляху
4. Алгоритм:
   - Додає початкову позицію в чергу
   - Поки черга не порожня:
     - Бере першу клітинку з черги
     - Якщо це кінцева позиція - відновлює шлях через `parent` масив
     - Інакше додає всі невідвідані сусідні проходи в чергу
5. Відновлює шлях, проходячи від кінця до початку через `parent` масив


## Структура проекту

```
lab3/
├── app/
│   ├── build.gradle                    # Конфігурація Android модуля
│   ├── src/
│   │   └── main/
│   │       ├── AndroidManifest.xml     # Маніфест додатку
│   │       ├── java/
│   │       │   └── com/example/mazegame/
│   │       │       ├── MainActivity.java    # Головна активність
│   │       │       ├── MazeView.java         # Custom View для відображення лабіринту
│   │       │       ├── Maze.java             # Клас лабіринту (генерація)
│   │       │       └── PathFinder.java       # Пошук найкоротшого шляху (BFS)
│   │       └── res/
│   │           ├── layout/
│   │           │   └── activity_main.xml    # Layout головного екрану
│   │           ├── values/
│   │           │   ├── strings.xml
│   │           │   ├── colors.xml
│   │           │   └── themes.xml
│   │           └── mipmap-*/              # Іконки додатку
│   └── proguard-rules.pro
├── build.gradle                        # Кореневий build.gradle
├── settings.gradle                     # Налаштування проекту
├── gradle.properties
└── README.md
```

## Класи та їх призначення

### MainActivity.java
Головна активність додатку, що керує:
- Ініціалізацією UI компонентів
- Обробкою натискань кнопок
- Діалогом вибору розміру лабіринту
- Відображенням повідомлень про перемогу

### MazeView.java
Кастомний `View` для відображення та взаємодії з лабіринтом:
- Відображення лабіринту на Canvas
- Обробка жестів (свайпи) та натискань клавіш
- Анімація руху гравця
- Показ/приховування оптимального шляху
- Валідація рухів
- Автоматичний перезапуск після перемоги

### Maze.java
Клас для генерації та зберігання лабіринту:
- Генерація лабіринту алгоритмом Recursive Backtracking
- Зберігання сітки лабіринту (стіни, проходи, старт, фініш)
- Валідація можливості руху
- Визначення позицій старту та фінішу

### PathFinder.java
Клас для знаходження найкоротшого шляху:
- Реалізація алгоритму BFS
- Відновлення шляху від початку до кінця
- Повернення списку координат оптимального маршруту

## Технології та залежності

- **Java 8** - мова програмування
- **Android SDK** - платформа розробки
  - `minSdk 24` (Android 7.0)
  - `targetSdk 34` (Android 14)
  - `compileSdk 34`
- **AndroidX Libraries**:
  - `androidx.appcompat:appcompat:1.6.1`
  - `com.google.android.material:material:1.11.0`
  - `androidx.constraintlayout:constraintlayout:2.1.4`
- **Gradle 8.1.4** - система збірки

## Як запустити

### Вимоги
- **Android Studio**
- **JDK 8** або вище
- **Android SDK**
- **Емулятор Android** або реальний пристрій з Android 7.0+

### Інструкції

1. **Відкрити проект**:
   ```bash
   # Відкрити Android Studio
   # File -> Open -> вибрати папку lab3
   ```

2. **Синхронізувати Gradle**:
   - Android Studio автоматично запропонує синхронізувати
   - Або: `File -> Sync Project with Gradle Files`

3. **Запустити додаток**:
   - Підключити Android пристрій або запустити емулятор
   - Натиснути `Run` (Shift+F10) або кнопку
   - Вибрати цільовий пристрій
   - Додаток встановиться та запуститься автоматично


## Керування

### Способи керування гравцем

1. **Стрілки на клавіатурі** (емулятор):
   - `↑` - рух вгору
   - `↓` - рух вниз
   - `←` - рух вліво
   - `→` - рух вправо

2. **Свайпи на екрані** (реальний пристрій):
   - Свайп вгору - рух вгору
   - Свайп вниз - рух вниз
   - Свайп вліво - рух вліво
   - Свайп вправо - рух вправо
   - Мінімальна відстань свайпу: 50 пікселів

### Кнопки інтерфейсу

- **"Показати шлях" / "Приховати шлях"** - показує/приховує найкоротший шлях до виходу (червоним кольором)
- **"Новий лабіринт"** - генерує новий випадковий лабіринт того ж розміру
- **"Розмір"** - відкриває діалог для зміни розміру лабіринту (15-51)

## Особливості реалізації

### Генерація лабіринту
- Розмір лабіринту завжди непарний (для коректної роботи алгоритму)
- Мінімальний розмір: 15x15
- Максимальний розмір: 51x51 (або менше, залежно від розміру екрану)
- Стартова позиція: верхній лівий кут (1,1)
- Кінцева позиція: нижній правий кут

### Анімація руху
- Використовує `ValueAnimator` для плавного переміщення
- Тривалість анімації: 150 мс
- Інтерполятор: `DecelerateInterpolator` (сповільнення в кінці)
- Анімація скасовується при зіткненні зі стіною

### Правильність рухів
- Перевірка меж лабіринту
- Перевірка наявності стіни в напрямку руху
- Блокування руху після перемоги (до автоматичного перезапуску)

### Оптимальний шлях
- Перераховується щоразу при зміні позиції гравця (якщо увімкнено показ)
- Відображається напівпрозорим червоним кольором
- Показує найкоротший шлях від поточної позиції до виходу

### Автоматичний перезапуск
- Після досягнення виходу показується повідомлення
- Через 3 секунди автоматично генерується новий лабіринт того ж розміру
- Стан гри скидається (гравець на старті, шлях приховано)

## Приклад використання

1. **Запуск додатку**: Відкривається лабіринт розміром 37x37
2. **Керування**: Використовуйте стрілки або свайпи для руху
3. **Показ шляху**: Натисніть "Показати шлях" для підказки
4. **Зміна розміру**: Натисніть "Розмір" та введіть нове значення (15-51)
5. **Новий лабіринт**: Натисніть "Новий лабіринт" для генерації
6. **Перемога**: Дійдіть до червоного квадрата (вихід)